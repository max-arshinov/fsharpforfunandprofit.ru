---
layout: page
title: "Изучая F#"
description: "Функциональные языки программирования требуют другого подхода"
nav: learning-fsharp
hasComments: 1
date: 2015-01-01
---

Функциональные языки сильно отличаются и могут оказаться значительно сложнее в освоении, чем привычные императивные языки.

Эта страница предлагает несколько советов по эффективному изучению F#.

## Подходите к изучению F# как новичок ##

Если у вас уже есть опыт в C# или Java, вы скорее всего заметили, что неплохо понимаете исходный код, написанный на других похожих языках, даже если не знакомы с их ключевыми словами или библиотеками.

Это потому, что все императивные языки предполагают одинаковый способ мышления, и опыт использования одного языка может быть легко перенесён на другой язык.

Многие люди подходят к изучению нового языка программирования путём поиска способов реализации концепций, которые уже знакомы.

Стоит только разобраться с тем "как присвоить значение переменной" или "как написать цикл", как вы уже шустро программируете на базовом уровне.

Изучая F#, **не стоит опираться на старые императивные концепции**.

В чистых функциональных языках нет переменных, циклов или объектов!

Да, F# — это гибридный язык и поддерживает эти концепции, но вы научитесь гораздо быстрее, если начнёте с чистого листа.

## Измените свой способ мышления ##

Важно понимать, что функциональное программирование — не просто стилистическое отличие. Это совершенно иной способ мышления о программировании. Разница столь же велика, что и между настоящим объектно-ориентированным программированием (скажем, как в Smalltalk) и традиционным императивным языком, таким как C.

F# позволяет использовать нефункциональные подходы, поэтому возникает соблазн сохранить уже знакомые привычки.

Можно использовать F# в нефункциональном стиле без изменения своего образа мышления и не осознавать, чего лишаетесь.

Для того чтобы получить максимальную пользу от F# и свободно владеть функциональным программированием в целом, критически важно мыслить функционально, а не императивно.

Самое важное — приложить достаточно усилий, чтобы разобраться в том, как именно работает F#, особенно ключевые идеи: функции и систему типов.

Так что, пожалуйста, прочтите (и перечитайте, если потребуется) серию ["думать функционально"](/series/thinking-functionally.html) и ["понимание F# типов"](/series/understanding-fsharp-types.html), поиграйтесь с примерами, и освойтесь с основными концепциями, прежде чем приступать к серьёзному кодированию.

Без понимания, как работают функции и типы, вам будет тяжело быть продуктивным.

## Что такое хорошо и что такое плохо ##

Вот список того, что стоит делать и чего не стоит. Надеюсь, он вдохновит думать функционально.

Поначалу это будет сложно, но, как и в изучении иностранного языка,
необходимо броситься в омут с головой, чтобы заставить себя говорить как местные.

* **Вообще** не используйте ключевое слово `mutable` на начальном этапе.

Написание сложных фунций без "костылей" в виде изменяемого состояния серьезно продвинет вас в понимании функциональной парадигмы.

* Не используйте циклы `for` или конструкцию `if-then-else`.

Используйте сопоставление с образцом для булевых значений и рекурсивный просмотр списков.

* Не используйте точечную нотацию.

Вместо того, чтобы обращаться через точку к методам объектов, попробуйте везде использовать функции.

То есть, пишите `String.length "hello"` вместо `"hello".Length`

Это может показаться ненужным усложнением, но этот подход естественнен при использовании конвейеров
и функций высшего порядка, таких как `List.map`.

И не пишите свои собственные методы!

Посмотрите [этот пост](/posts/type-extensions/#downsides-of-methods), чтобы разобраться в недостатках методов.

* Как следствие, не создавайте классы.

Используйте только специфичные для F# типы, такие как кортежи, записи и объединения.

* Не используйте отладчик.

Если вы раньше полагались на использование отладчика для нахождения и исправления ошибок в коде, вы будете сильно удивлены.

В F#, вы скорее всего не зайдёте так далеко, потому что компилятор гораздо более строг во многих аспектах.

И конечно, не существует инструмента для "отладки" компилятора и пошагового выполнения его работы.

Лучшим инструментом для отладки является ваш мозг, и F# заставляет его использовать!

С другой стороны:

* Создавайте множество "маленьких типов", особенно типов объединения.

Они легковесны и просты, а их использование поможет в документировании модели предметной области и обеспечении ее корректности.

* Разберитесь с типами `list` и `seq`, а также с их модулями в целом.

Фунции вроде `List.fold` и `List.map` очень мощны.

Понимание, как их использовать - ключ к изучению функций высшего порядка в целом.

* Как только освоите модули коллекций, попытайтесь избегать рекурсии.

В рекурсивном коде легче допустить ошибку. К тому же не всегда очевидно будет ли она оптимизирована в хвостовую.

При использовании `List.fold` вы никогда не столкнётесь с этой проблемой.

* Используйте конвейер (`|>`) и композицию (`>>`) везде, где только возможно.

Этот стиль — идиоматический для F#, в отличие от вложенных вызовов функций, наподобие `f(g(x))`.

* Поймите, как работает частичное применение, и постарайтесь привыкнуть к бесточечному (неявному) стилю.

* Разрабатывайте код постепенно, используя интерактивное окно для тестирования фрагментов кода.

Если попробуете сначала слепо написать большое количество кода, а затем его скомпилировать целиком, велика вероятность столкнуться с кучей болезенных и трудно отлаживаемых ошибок компиляции.

## Устранение неполадок ##

Существует список чрезвычайно распространённых ошибок, совершаемых новичками, и, если вы демотивированы попытками заставить код скомпилироваться, пожалуйста, прочтите ["устранение неполадок F#"](/troubleshooting-fsharp/).
